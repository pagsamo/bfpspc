{% extends 'base.html' %}
{% load leaflet_tags %}
{% block content %}
    {% leaflet_map "mapid" callback="our_marker" %}
{% endblock content %}
{% block scripts %}
    <script>
        function our_marker(map, options) {
            const incidentCount = new L.GeoJSON.AJAX("{% url 'barangay_incident_count' %}", {
                onEachFeature: function (feature, layer) {
                    layer.bindPopup('<h3 style="color: red">Incident Count: '+feature.properties.IncidentCount.toString()+'</h3><p>Barangay: '+feature.properties.Name.toString()+'<p>');
                }
            });
            incidentCount.addTo(map)

        }//function our_marker(map, options) {


    </script>
{% endblock %}