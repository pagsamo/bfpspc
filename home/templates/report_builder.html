{% extends 'base.html' %}
{% block styles %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
{% endblock styles %}
{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-md-3">
            </div>
            <div class="col-md-6">
            <div style="border:1px solid #ccc; padding:2% 2% 2% 5%; border-radius:20px;">
            <form action="{% url "report" %}" method="post" id="form_builder">
                    {% csrf_token %}
                    <div class="row qsection" style="margin-top:20px">
                    From: <input id="dateFrom" type="date" name="dateFrom" required>
                    To: <input id="dateTo" type="date" name="dateTo" required>
                    </div>
                    {% comment %} <div class="row qsection" style="margin-top:20px">
                    Barangay: 
                    <select name="barangay" id="barangay">
                    <option value="" selected>-</option>
                    {% for b in barangays %}
                        <option value="{{ b.Name }}">{{ b.Name }}</option>
                    {% endfor %}
                      </select>
                    </div> {% endcomment %}
                    <div class="row qsection" style="margin-top:20px">
                    <p>Please select all the fields you want to show on your report.</p>
                    </div>
                     
                    <div class="row qsection" style="margin-top:20px">
                        <div class="col-md-3"><input type="checkbox" name="DateTime"> : Date</div>
                        <div class="col-md-3"><input type="checkbox" name="HouseNumber"> : House Number</div>
                        <div class="col-md-3"><input type="checkbox" name="Street">  : Street</div>
                        <div class="col-md-3"><input type="checkbox" name="Barangay"> :  Barangay</div>
                    </div>
                    <div class="row" style="margin-top:20px">
                        <div class="col-md-3"><input type="checkbox" name="OccupancyType"> : Type of Occupancy</div>
                        <div class="col-md-3"><input type="checkbox" name="OwnerEstablishmentName"> : Owner / Establishment</div>
                        <div class="col-md-3"><input type="checkbox" name="AlarmLevel"> : Alarm Level</div>
                        <div class="col-md-3"><input type="checkbox" name="Injuries"> : Injuries</div>
                    </div>
                    <div class="row" style="margin-top:20px">
                        <div class="col-md-3"><input type="checkbox" name="FatalitiesMale"> : Male Fatalities</div>
                        <div class="col-md-3"><input type="checkbox" name="FatalitiesFemale"> : Female Fatalities</div>
                        <div class="col-md-3"><input type="checkbox" name="FinalDamageCost"> : Damage Cost</div>
                        <div class="col-md-3"><input type="checkbox" name="Origin"> : Origin</div>
                    </div>
                    <div class="row" style="margin-top:20px">
                        <div class="col-md-3"><input type="checkbox" name="Cause"> : Cause</div>
                        <div class="col-md-3"><input type="checkbox" name="FireArsonInvestigator"> : Investigator </div>
                    </div>
                    <div class="row" style="margin-top:20px; margin-bottom:20px; text-align: center;">
                     <input type="submit" value="Submit" class="btn btn-success btn-lg">
                    </div>
                    
                </form>
            </div> 
            </div>
            <div class="col-md-3">
            </div>
        </div>
    </div>
{% endblock content %}
{% block scripts %}
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
    //validate date entry - date from cannot be greater than date to
        $(document).ready(function(){
        $('#form_builder').on('submit', function(e) {
            e.preventDefault();
            //Validate form and submit
            var dateFrom = $('#dateFrom').val();
            var dateTo = $('#dateTo').val();
            var form_elems = document.getElementById('form_builder').elements;
               var count_checked = 0;
               for(var i=0; i < form_elems.length; i++){
                   if(form_elems[i].checked){
                       count_checked += 1;
                   }
               }
            if(dateFrom >= dateTo){
                alert("Date To should be greater than Date From");
            }
            else if(count_checked == 0){
                alert("At least one field should be checked.")
            }else{
                this.submit();
            }
        
        });
        //document ready
        });
    </script>
{% endblock scripts %}

